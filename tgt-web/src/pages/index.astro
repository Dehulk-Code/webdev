---
// src/pages/index.astro
import BaseLayout from "../layouts/BaseLayout.astro";
---

<BaseLayout pageTitle="Beranda">
  <section class="hero">
    <div class="slider-container">
      <div
        class="slide active"
        style="background-image: url('/images/buoy.jpg');"
      >
      </div>
      <div class="slide" style="background-image: url('/images/econom.jpg');">
      </div>
    </div>

    <div class="hero-content">
      <p>Selamat Datang di PT TAPIAN GODANG TUA</p>
      <h1>Solusi Profesional untuk Fabrikasi Baja dan Kontraktor Umum</h1>
      <div>
        <a href="#layanan" class="btn">Lihat Layanan Kami</a>
        <a href="kontak" class="btn btn-secondary">Hubungi Kami</a>
      </div>
    </div>

    <button class="arrow left-arrow" id="prevBtn">&#10094;</button>
    <button class="arrow right-arrow" id="nextBtn">&#10095;</button>

    <div class="slider-dots">
      <span class="dot active" data-slide="0"></span>
      <span class="dot" data-slide="1"></span>
    </div>
  </section>

  <section id="layanan" class="services-section">
    <div class="container">
      <h2>Spesialisasi Kami</h2>

      <p class="section-subtitle">
        Kami menawarkan rangkaian layanan spesialis untuk memenuhi kebutuhan
        proyek Anda dengan peralatan modern dan tim yang berpengalaman
      </p>

      <div class="services-grid">
        <div class="service-item">
          <h3>Fabrication</h3>
          <p>
            Jasa fabrikasi komponen dan struktur baja sesuai dengan desain dan
            kebutuhan teknis proyek Anda.
          </p>
        </div>
        <div class="service-item">
          <h3>Forming Head</h3>
          <p>
            Spesialis dalam pembuatan tutup tangki (head) dengan berbagai bentuk
            untuk bejana tekan dan tangki penyimpanan.
          </p>
        </div>
        <div class="service-item">
          <h3>Rolling Plate</h3>
          <p>
            Layanan pengerolan plat logam untuk membentuk silinder, kerucut,
            atau segmen lengkung.
          </p>
        </div>
        <div class="service-item">
          <h3>Rolling H-Beam & WF</h3>
          <p>
            Jasa pengerolan balok baja profil H-Beam dan Wide Flange (WF) untuk
            aplikasi struktur melengkung.
          </p>
        </div>
        <div class="service-item">
          <h3>Bending Plate</h3>
          <p>
            Proses penekukan plat (tekuk) menggunakan mesin press brake untuk
            menghasilkan sudut dan bentuk yang presisi.
          </p>
        </div>
        <div class="service-item">
          <h3>Rolling Pipe</h3>
          <p>
            Layanan pengerolan pipa untuk menciptakan lengkungan (bending)
            dengan radius yang diinginkan.
          </p>
        </div>
        <div class="service-item">
          <h3>Rolling Angle</h3>
          <p>
            Pengerolan baja siku untuk pembuatan rangka melingkar, flensa, dan
            komponen struktural lainnya.
          </p>
        </div>
        <div class="service-item">
          <h3>Rolling UNP</h3>
          <p>
            Jasa pengerolan baja profil UNP (U-channel) untuk berbagai aplikasi
            konstruksi dan struktural.
          </p>
        </div>
      </div>
    </div>
  </section>

  <style>
    /* hero section */
    .hero {
      min-height: 90vh;
      position: relative;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
    }

    /* Slider dan slide*/
    .slider-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .slide {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 1.5 ease-in-out;
    }

    .slide.active {
      opacity: 1;
    }

    .slider-container::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1;
    }

    .hero-content {
      position: relative;
      z-index: 3;
      text-align: center;
    }

    .arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 4;
      background: #fff
      font-size: 24px;
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 5px;
      transition: background 0.3s;
    }
    .arrow:hover {
      background: var(--accent-color);
    }
    .left-arrow {
      left: 20px;
    }
    .right-arrow {
      right: 20px;
    }

    .slider-dots {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 4;
      display: flex;
      gap: 10px;
    }

    .dot {
      width: 12px;
      height: 12px;
      background: rgba(255, 255, 255, 0.5);
      border-radius: 50%;
      cursor: pointer;
      transition: background 0.3s;
    }

    .dot.active {
      background: white;
    }

    .hero-content h1 {
      font-size: 40px;
      margin-top: 20px;
      margin-bottom: 20px;
      color: #fff;
    }

    .btn {
      display: inline-block;
      padding: 12px 25px;
      background: var(--secondary-color);
      color: #fff;
      text-decoration: none;
      border-radius: 5px;
      font-weight: bold;
      transition: background 0.3s;
      margin: 5px;
    }

    .btn:hover {
      background: var(--accent-color);
    }

    .btn-secondary {
      background: transparent;
      border: 2px solid #fff;
    }

    .hero-content p {
      font-size: 20px;
      margin: 5px;
    }

    .container {
      width: 85%;
      margin: auto;
    }

    .services-section {
      padding: 60px 0;
      min-height: 75vh;
      background-color: var(--light-gray);
    }

    .services-section h2 {
      text-align: center;
      font-size: 32px;
      margin-bottom: 40px;
      color: var(--primary-color);
    }

    .section-subtitle {
      text-align: center;
      max-width: 800px;
      margin: 0 auto 40px auto;
      color: var(--dark-gray);
    }

    /* KEAJAIBAN CSS GRID RESPONSIVE ADA DI SINI */
    .services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .service-item {
      background: #fff;
      padding: 40px 25px;
      border-radius: 5px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      text-align: center;
      border-left: 5px solid var(--secondary-color);
      transition: transform 0.2s ease;
    }

    .service-item:hover {
      transform: translateY(-5px);
    }

    .service-item h3 {
      margin-top: 0;
      margin-bottom: 15px;
      font-size: 20px;
      color: var(--secondary-color);
    }
  </style>

  <script>
    import { effect } from "astro:schema";

    document.addEventListener("DOMContentLoaded", () => {
      let currentSlide = 0;
      const slides = document.querySelectorAll(".slide");
      const dots = document.querySelectorAll(".dot");
      const totalSlides = slides.length;
      const prevBtn = document.getElementById("prevBtn");
      const nextBtn = document.getElementById("nextBtn");

      function showSlide(index: number) {
        if (index >= totalSlides) {
          currentSlide = 0;
        } else if (index < 0) {
          currentSlide = totalSlides - 1;
        } else {
          currentSlide = index;
        }

        slides.forEach((slide) => slide.classList.remove("active"));
        dots.forEach((dot) => dot.classList.remove("active"));

        slides[currentSlide].classList.add("active");
        dots[currentSlide].classList.add("active");
      }

      if (nextBtn) {
        nextBtn.addEventListener("click", () => {
          showSlide(currentSlide + 1);
        });
      }
      if (prevBtn) {
        prevBtn.addEventListener("click", () => {
          showSlide(currentSlide - 1);
        });
      }

      dots.forEach((dot) => {
        dot.addEventListener("click", (e) => {
          const target = e.target as HTMLElement;
          const slideIndex = parseInt(target.getAttribute("data-slide")!);

          showSlide(slideIndex);
        });
      });

      setInterval(() => {
        showSlide(currentSlide + 1);
      }, 5000);
    });
  </script>

  <!-- Tambahkan konten tinggi agar bisa di-scroll 
	<div style="height: 2000px; background: #f4f4f4;">
		<p>Scroll ke bawah untuk melihat apakah header tetap di atas.</p>
	</div> -->
</BaseLayout>
